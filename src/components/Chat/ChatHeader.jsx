import React from 'react';
import { useSelector } from 'react-redux';

import { Row, Badge, Input, message } from 'antd';
import { StarOutlined } from '@ant-design/icons';

import SvgTemplate from '../Common/SvgTemplate';

import './Chat.scss';

const ChatHeader = (props) => {

  const {
    enteredSearchValue,
    setEnteredSearchValue = () => { },
    channelName = 'untitled',
    channelMembersCount = 0,
    contentVisible = true
  } = props;

  const { isInputActive, isFetching } = useSelector((state) => state.chatReducer);

  const { Search } = Input;
  //
  const errorNotification = () => {
    message.error('Function temporarily unavailable');
  };
  //
  return (
    <Row className="chat__section chat__section--top">
      <div className="chat__column chat__column--name">
        <span className="chat__name">{channelName}</span>
        <button className="chat__button">
          <span className="chat__icon"><StarOutlined /></span>
        </button>
      </div>

      <div className="chat__column chat__column--user">
        <span className="chat__icon">
          <SvgTemplate id="user" />
        </span>
        <span className="chat__users">{channelMembersCount}</span>
      </div>

      <div className="chat__column chat__column--form">
        <form className="form" onSubmit={e => e.preventDefault()}>
          <Search
            placeholder="Search.."
            style={{ borderRadius: '5px' }}
            disabled={!isInputActive || isFetching || !contentVisible}
            value={enteredSearchValue}
            onChange={(e) => setEnteredSearchValue(e.target.value)}
          />
        </form>
      </div>

      <div className="chat__column chat__column--notification">
        <button className="chat__button">
          <Badge count={9} size="small">
            <span className="chat__icon">
              <SvgTemplate id="notification" />
            </span>
          </Badge>
        </button>
      </div>

      <div className="chat__column chat__column--settings">
        <button className="chat__button" onClick={errorNotification}>
          <span className="chat__icon">
            <SvgTemplate id="chat-settings" />
          </span>
        </button>
      </div>
    </Row>
  );
};

export default ChatHeader;
